<html>
<head>
	<script src=".\js\geoclasses.js"></script>
	<script src=".\js\geoconverter.js"></script>
	<script src=".\js\geoparse.js"></script>
	<!--script src=".\geoparse_test.js"></script>
	<script src=".\utmparse_test.js"></script-->
</head>
<body>
	<div id="divTest">Test
	</div>
<script type="text/javascript">
	var test = document.getElementById("divTest");
	
	var utm = new geoUtm();
	var latlon = new geoLatLon(59.155,9.999);
	test.innerHTML += "<br/>Test toString(): " + latlon.toString();
	//var latlon = new geoLatLon(-45.155,174.999);
	test.innerHTML += "<br/>Test toString(): " + latlon.toString(" : N d° m' s\" : ");
	test.innerHTML += "<br/>Test toString(): " + latlon.toString("[do m s N]", ", ", true, true);
	test.innerHTML += "<br/>Test toString(): " + latlon.toString("d° m N", ", ", true);
	test.innerHTML += "<br/>Test toString(): " + latlon.toString("d° N", ", ", true);

	
	
	test.innerHTML += "<br/>Test case: " + " N " + latlon.lat + " E " + latlon.lon;
	
	
	
	
	geoconverter.LatLonToUTM(latlon, utm);
	var utmStr = utm.toString();
	
	test.innerHTML += "<br/>Converted to UTM: " + utmStr;
	
	// Parse UtmStr
	utm = geoparse.parseUtm(utmStr);
	test.innerHTML += "<br/>Parsed back as: " + utm.toString();

	geoconverter.UTMToLatLon (utm, latlon);
	var latlonStr = latlon.toString();
	test.innerHTML += "<br/>Converted back to Lat/Lon: " + latlonStr;
	
	// Parse latlonStr 
	latlon = geoparse.parseLatLon(latlonStr);
	test.innerHTML += "<br/>Parsed back as: " + latlon.toString();


	geoparse.setDebugDiv("divDebug");
	
	function onClickConvertUtm() {
		var str = document.getElementById("txtCoordinate").value;
		var utmTry = geoparse.parseUtm(str);
		
		var div = document.getElementById("divResult");
		if (utmTry) {			
			div.innerHTML = "Parsed as UTM: " + utmTry + "<br/>\n";

			var latlon = geoconverter.UTMToLatLon (utmTry);			
			div.innerHTML += "" + "Geo: " + latlon.toString() + "<br/>\n";
			
			var utm = geoconverter.LatLonToUTM(latlon);
			div.innerHTML += "Back again to UTM: " + utm.toString() + "<br/>";

			var utm33 = geoconverter.LatLonToUTM(latlon, undefined, 33);
			var posStr = utm33.easting+"/"+utm33.northing;
			var urlN = "http://norgeskart.no/#12/"+posStr+"/m/"+posStr;
			div.innerHTML += "In UTM zone 33: <a href=\""+urlN+"\" target=\"_blank\">" + utm33.toString() + "</a><br/>";
		} else {
			div.innerHTML = "Cannot parse the UTM coordinate";
		}
		
	}
	function onClickConvertGeo() {
		var str = document.getElementById("txtCoordinate").value;
		var geoTry = geoparse.parseLatLon(str);

		var div = document.getElementById("divResult");
		if (geoTry) {
			div.innerHTML = "" + "Parsed as Lat/Long: " + geoTry.toString() + "<br/>\n";
			
			var utm = geoconverter.LatLonToUTM(geoTry);
			div.innerHTML += "" + "UTM: " + utm.toString() + "<br/>\n";
			
			var latlon = geoconverter.UTMToLatLon(utm);
			div.innerHTML += "Back again to Lat/Long: " + latlon.toString() + "<br/>";
		} else {
			div.innerHTML = "Cannot parse Lat/Long coordinate ";
		}
	}

</script>
	<div id="divInput">
			Coordinate: <input id="txtCoordinate" autofocus/> <button id="btnConvertUtm" type="submit" onclick="onClickConvertUtm()">Convert UTM</button><button id="btnConvertGeo"  onclick="onClickConvertGeo()">Convert Lat/Long</button>
	</div>
	<div id="extraUtmHemisphere" style="display: none;">
		This UTM coordinate does not indicate wherther it is on the norther or southern hemisphere.<br/>
		Is it on the <select ><option value="N">North</option><option value="S">South<option></select>
	</div>
	<div id="divResult">
	</div>
	<div id="divDebug">
	</div>
</body>
</html>