<html>
<head>
	<script src=".\js\geoclasses.js"></script>
	<script src=".\js\geoconverter.js"></script>
	<script src=".\js\geoparse.js"></script>
	<script src=".\js\utmparse.js"></script>
	<!--script src=".\geoparse_test.js"></script>
	<script src=".\utmparse_test.js"></script-->
</head>
<body>
	<div id="divTest">Test
	</div>
<script type="text/javascript">
	var test = document.getElementById("divTest");
	
	var utm = new geoUtm();
	var latlon = new geoLatLon(59.155,9.999);
	test.innerHTML += "<br/>Test toString(): " + latlon.toString();
	//var latlon = new geoLatLon(-45.155,174.999);
	test.innerHTML += "<br/>Test toString(): " + latlon.toString(" : N d° m' s\" : ");
	test.innerHTML += "<br/>Test toString(): " + latlon.toString("[do m s N]", ", ", true, true);
	test.innerHTML += "<br/>Test toString(): " + latlon.toString("d° m N", ", ", true);
	test.innerHTML += "<br/>Test toString(): " + latlon.toString("d° N", ", ", true);

	
	
	test.innerHTML += "<br/>Test case: " + " N " + latlon.lat + " E " + latlon.lon;
	
	
	
	
	LatLonToUTM(latlon, utm);
	var utmStr = utm.toString();
	
	test.innerHTML += "<br/>Converted to UTM: " + utmStr;
	
	// Parse UtmStr
	utm = utmparse.parseUtm(utmStr);
	test.innerHTML += "<br/>Parsed back as: " + utm.toString();

	UTMToLatLon (utm, latlon);
	var latlonStr = latlon.toString();
	test.innerHTML += "<br/>Converted back to Lat/Lon: " + latlonStr;
	
	// Parse latlonStr 
	latlon = geoparse.parseGeo(latlonStr);
	test.innerHTML += "<br/>Parsed back as: " + latlon.toString();


	utmparse.setDebugDiv("divDebug");
	geoparse.setDebugDiv("divDebug");
	
	function onClickConvertUtm() {
		var str = document.getElementById("txtCoordinate").value;
		var utmTry = utmparse.parseUtm(str);
		
		if (utmTry) {			
			var latlon = new Array(2);
			var geo = UTMToLatLon (utmTry, latlon);
			
			var div = document.getElementById("divResult");
			div.innerHTML = "UTM: " + utmTry + "<br/>" + "Geo: " + " N " + latlon[0] + " E " + latlon[1];
		} else {
			div.innerHTML = "Cannot parse the UTM coordinate";
		}
		
	}
	function onClickConvertGeo() {
		var str = document.getElementById("txtCoordinate").value;
		var geoTry = geoparse.parseGeo(str);

		if (geoTry) {
			utm = LatLonToUTM(geoTry, utm);
			
			var div = document.getElementById("divResult");
			div.innerHTML = "Lat/Long: " + geoTry + "<br/>" + "UTM: " + utm[0] + utm[1] + " " + utm[2] + "mE " + utm[3] + "mN";
		} else {
			div.innerHTML = "Cannot parse Lat/Long coordinate ";
		}
	}

</script>
	<div id="divInput">
			Coordinate: <input id="txtCoordinate" autofocus/> <button id="btnConvertUtm" type="submit" onclick="onClickConvertUtm()">Convert UTM</button><button id="btnConvertGeo"  onclick="onClickConvertGeo()">Convert Lat/Long</button>
	</div>
	<div id="extraUtmHemisphere" style="display: none;">
		This UTM coordinate does not indicate wherther it is on the norther or southern hemisphere.<br/>
		Is it on the <select ><option value="N">North</option><option value="S">South<option></select>
	</div>
	<div id="divResult">
	</div>
	<div id="divDebug">
	</div>
</body>
</html>