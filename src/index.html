<html>
<head>
	<script src=".\js\geoconverter.js"></script>
	<script src=".\js\geoparse.js"></script>
	<script src=".\js\utmparse.js"></script>
	<!--script src=".\geoparse_test.js"></script>
	<script src=".\utmparse_test.js"></script-->
</head>
<body>
	<div id="divTest">Test
	</div>
<script type="text/javascript">
	var test = document.getElementById("divTest");

	var utm = new Array(4);
	var latlon = new Array(2);
	
	var lat = 59.0;
	var lon = 9.0;
	var latlon = [lat, lon];
	test.innerHTML += "<br/>Test case: " + " N " + lat + " E " + lon;
	
	var utm2 = LatLonToUTM(latlon, utm);
	test.innerHTML += "<br/>Converted to UTM: " + utm[0] + utm[1] + " " + utm[2] + "mE " + utm[3] + "mN ";
	test.innerHTML += "<br/>Converted to UTM: " + utm2[0] + utm2[1] + " " + utm2[2] + "mE " + utm2[3] + "mN ";


	var latlon2 = UTMToLatLon (utm, latlon);
	
	test.innerHTML += "<br/>Converted back to: " + " N " + latlon2[0] + "° E " + latlon2[1] + "°";

	utmparse.setDebugDiv("divDebug");
	geoparse.setDebugDiv("divDebug");
	
	function onClickConvertUtm() {
		var str = document.getElementById("txtCoordinate").value;
		var utmTry = utmparse.parseUtm(str);
		
		if (utmTry) {			
			var latlon = new Array(2);
			var geo = UTMToLatLon (utmTry, latlon);
			
			var div = document.getElementById("divResult");
			div.innerHTML = "UTM: " + utmTry + "<br/>" + "Geo: " + " N " + latlon[0] + " E " + latlon[1];
		} else {
			div.innerHTML = "Cannot parse the UTM coordinate";
		}
		
	}
	function onClickConvertGeo() {
		var str = document.getElementById("txtCoordinate").value;
		var geoTry = geoparse.parseGeo(str);

		if (geoTry) {
			utm = LatLonToUTM(geoTry, utm);
			
			var div = document.getElementById("divResult");
			div.innerHTML = "Lat/Long: " + geoTry + "<br/>" + "UTM: " + utm[0] + utm[1] + " " + utm[2] + "mE " + utm[3] + "mN";
		} else {
			div.innerHTML = "Cannot parse Lat/Long coordinate ";
		}
	}

</script>
	<div id="divInput">
			Coordinate: <input id="txtCoordinate" autofocus/> <button id="btnConvertUtm" type="submit" onclick="onClickConvertUtm()">Convert UTM</button><button id="btnConvertGeo"  onclick="onClickConvertGeo()">Convert Lat/Long</button>
	</div>
	<div id="extraUtmHemisphere" style="display: none;">
		This UTM coordinate does not indicate wherther it is on the norther or southern hemisphere.<br/>
		Is it on the <select ><option value="N">North</option><option value="S">South<option></select>
	</div>
	<div id="divResult">
	</div>
	<div id="divDebug">
	</div>
</body>
</html>